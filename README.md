# Dian

a repo to store the code of Dian Group

该库内有两个文件夹，ESP32S3文件夹，为基于arduino框架的工程

IDF为基于IDF框架的工程

为了在规定时间内完成所有基础要求和扩展要求，所以采用了arduino框架加速开发，IDF框架内预计只会包含基础要求和一两项扩展

### ESP32S3

~~类似于stm32，对每个功能进行模块化封装~~ 

事实证明，arduino框架的封装，导致自己封装的模块会出现奇奇怪怪的问题，遂放弃，只在IDF框架采用

基础部分已完成:

- 点灯 3.12
- 串口 3.12
- I2C读取MPU6050数据 3.12
- 解算MPU6050速度 3.13
- 数据优化 3.15



扩展部分已完成：

- 数据传输到上位机，使用电脑进行数值计算 3.13
- WIFI传输数据（手机热点作为AP，ESP8266作为STA） 3.13
- WEB搭建，展示数据 3.14
- 屏幕显示 3.16
- 基于lvgl的UI制作 3.16



LEVEL 1 

- [x] 点灯

LEVEL 2

- [x] 串口
- [x] IIC

LEVEL 2 ==扩展==

- [x] 连接AP，获取IP
- [x] WiFi传输六轴数据到电脑
- [x] 搭建WEB，实现逻辑交互

LEVEL 3

- [x] 解算速度
- [x] 优化数据

LEVEL 3 ==扩展==

- [x] 计算欧拉角
- [x] 计算移动方向，移动速度
- [x] 计算移动轨迹

LEVEL 4 ==扩展==

- [x] 传输到电脑，电脑进行数值计算

LEVEL 5 ==扩展==

- [x] 屏幕显示
- [x] LVGL移植





### IDF

类似于stm32，对每个功能进行模块化封装

基础部分已完成：

- 点灯封装
- 串口封装 3.16
- i2c封装 3.17
- mpu6050姿态解算封装 3.17



------------

工程大体完成 3.17

*纪念 UI设计

![miku](https://cdn.jsdelivr.net/gh/SHR-sky/Picture@main/Pic/IMG_20240317_185848_edit_66651877896292.jpg)



--------------

学习记录

### 3.12

由于大一了解过arduino，所以查询esp32资料时，优先选择，进行快速开发。由于习惯使用VSCode，所以选择插件platformIO进行开发。利用函数，简单实现了点灯操作。由于之前学习过一定stm32，所以进行了函数再封装。然后，利用自带的串口函数，进行了串口收发信息。

由于学长建议采用官方插件配合IDF框架使用，所以接下来时间用于配置IDF环境，以及了解Cmake，同时了解到IDF组件功能，对GPIO操作成功后，对函数也进行了封装。

接下来，由于之前没有使用过esp32的iic，所以阅读了官方库<Wire.h>，然后查询手册后，发现ESP32S3没有标注硬件串口，所以我采取软件iic。同时，在配置通信频率时，出现了问题，经过仔细阅读Wire.begin的函数封装，发现使用软件iic时，必需要自定义频率，无默认值。在晚上1：00解决问题。



### 3.13